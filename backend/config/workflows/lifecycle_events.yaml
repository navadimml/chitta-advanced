# Lifecycle Events - Wu Wei Configuration (×¤×©×•×˜ - × ×˜×•×œ ×—×œ×§×™× ×¢×•×“×¤×™×)
# ğŸŒŸ Wu Wei: No phases, no gates. Just prerequisites and moments.

version: "3.0"
workflow_name: "continuous_conversation_with_progressive_unlocking"

# ============================================
# ALWAYS AVAILABLE
# ============================================
# Capabilities that require no prerequisites - available from first message
always_available:
  - conversation      # Talk to Chitta anytime about anything
  - journaling        # Record observations and milestones
  - consultation      # Get answers and guidance

# ============================================
# MOMENTS
# ============================================
# Moments that unlock progressively as prerequisites are met
# Each moment can include:
#   when: Prerequisites (flat dict with AND logic, OR: {} for alternatives)
#   artifact: Artifact ID to generate (optional)
#   message: Message to send when moment happens (optional)
#   ui: UI guidance to prevent hallucinations (optional)
#     type: UI element type (card, button, modal, banner, etc.)
#     default: Guidance text for default/desktop
#     mobile: Mobile-specific guidance (only if different)
#   unlocks: List of capability IDs this moment unlocks (optional)
#
moments:
  # Welcome
  first_message:
    when:
      message_count: 1
    message: |
      ×©×œ×•×! ×× ×™ ×›××Ÿ ×›×“×™ ×œ×”×›×™×¨ ××ª {child_name} ×•×œ×¢×–×•×¨ ×œ×š ×œ×”×‘×™×Ÿ ××ª ×”×”×ª×¤×ª×—×•×ª ×©×œ×•/×”.
      ×¡×¤×¨×™ ×œ×™ - ××” ××¢× ×™×™×Ÿ ××•×ª×š? ××” ×©××— ××•×ª×š? ××” ××“××™×’?

  # Knowledge richness milestone
  knowledge_rich:
    when:
      knowledge_is_rich: true
      baseline_video_guidelines.exists: false
    message: |
      ×ª×•×“×” ×©×¡×™×¤×¨×ª ×œ×™ ×›×œ ×›×š ×”×¨×‘×” ×¢×œ {child_name}! ğŸ’™

      ×× ×™ ××¨×’×™×©×” ×©×™×© ×œ×™ ×”×‘× ×” ×˜×•×‘×” ×¢×›×©×™×•. ×× ×ª×¨×¦×™, ××•×›×œ ×œ×”×›×™×Ÿ ×œ×š ×”× ×—×™×•×ª ××•×ª×××•×ª ×œ×¦×™×œ×•× ×¡×¨×˜×•× ×™× - ×–×” ×™×¢×–×•×¨ ×œ×™ ×œ×¨××•×ª ××ª {child_name} ×‘×¤×¢×•×œ×”.

  # Baseline assessment flow
  guidelines_ready:
    when:
      knowledge_is_rich: true
    artifact: "baseline_video_guidelines"
    message: "×”×”× ×—×™×•×ª ××•×›× ×•×ª! ğŸ“¹"
    ui:
      type: "card"
      default: "×ª×¨××™ ××ª ×”×›×¨×˜×™×¡ '×”× ×—×™×•×ª ×¦×™×œ×•×' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×” - ×œ×—×¦×™ ×¢×œ×™×• ×›×“×™ ×œ×§×¨×•× ××ª ×”×”× ×—×™×•×ª ×”××œ××•×ª"
    unlocks:
      - upload_videos

  videos_ready:
    when:
      uploaded_video_count: ">= 3"
    artifact: "baseline_videos"
    message: |
      ××¢×•×œ×”! 3 ×”×¡×¨×˜×•× ×™× ×”×•×¢×œ×•.
      ×× ×™ ××•×›× ×” ×œ× ×ª×— ××•×ª× - ×–×” ×™×™×§×— ×›-10-15 ×“×§×•×ª. ×‘×™× ×ª×™×™×, ×ª××™×“ ××¤×©×¨ ×œ×©××•×œ ×©××œ×•×ª ××• ×œ×”×•×¡×™×£ ×œ×™×•××Ÿ. ğŸ’™
    ui:
      type: "card"
      default: "×œ×—×¦×™ ×¢×œ ×”×›×¨×˜×™×¡ '× ×™×ª×•×— ×¡×¨×˜×•× ×™×' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×” ×›×“×™ ×œ×”×ª×—×™×œ ××ª ×”× ×™×ª×•×—"
    unlocks:
      - analyze_videos

  analysis_done:
    when:
      baseline_videos.exists: true
      videos_analyzed: true
    artifact: "baseline_video_analysis"
    message: |
      ×”× ×™×ª×•×— ×”×•×©×œ×! ğŸ‰
      ××¦××ª×™ ×“×¤×•×¡×™× ××¢× ×™×™× ×™×. ×‘×•××™ × ×¡×›× ××ª ×›×œ ××” ×©×œ××“×ª×™ ×¢×œ {child_name} ×‘×“×•×— ××¡×•×“×¨.
    ui:
      type: "card"
      default: "×œ×—×¦×™ ×¢×œ ×”×›×¨×˜×™×¡ '×™×¦×™×¨×ª ×“×•×—' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×” ×›×“×™ ×œ×™×¦×•×¨ ××ª ×”×“×•×— ×”××¡×•×“×¨"
    unlocks:
      - generate_reports

  report_ready:
    when:
      baseline_video_analysis.exists: true
      OR:
        conversation_knowledge_is_rich: true
    artifact: "baseline_parent_report"
    message: |
      ×”×“×•×— ××•×›×Ÿ! ğŸ“„

      ×–×” ×”×™×” ×ª×”×œ×™×š ×¢×©×™×¨ - ×ª×•×“×” ×©×”×©×§×¢×ª ××ª ×”×–××Ÿ ×œ×©×ª×£ ×•×œ×¦×œ×.
      ××¢×›×©×™×• ×× ×™ ×›××Ÿ ×‘×©×‘×™×œ×š ×œ×›×œ ×©××œ×”, ×›×œ ×ª×¦×¤×™×ª, ×›×œ ×“×‘×¨ ×©××ª×¢×•×¨×¨ ×‘×“×¨×š. ğŸ’™
    ui:
      type: "card"
      default: "×œ×—×¦×™ ×¢×œ ×”×›×¨×˜×™×¡ '××“×¨×™×š ×œ×”×•×¨×™×' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×” ×›×“×™ ×œ×§×¨×•× ××ª ×”×“×•×— ×”××œ×"
    unlocks:
      - view_reports
      - find_experts
      - start_re_assessment

  professional_report_ready:
    when:
      baseline_parent_report.exists: true
    artifact: "baseline_professional_report"
    unlocks:
      - expert_matching

  # Ongoing support
  journal_entries:
    artifact: "journal_entries"
    # No prerequisites - always available via always_available list

  # Re-assessment flow
  re_assessment_guidelines_ready:
    when:
      baseline_parent_report.exists: true
      re_assessment.active: true
      knowledge_is_rich: true
    artifact: "re_assessment_video_guidelines"
    message: "×”× ×—×™×•×ª ××¢×•×“×›× ×•×ª ××•×›× ×•×ª! ğŸ“¹"
    ui:
      type: "card"
      default: "×ª×¨××™ ××ª ×”×›×¨×˜×™×¡ '×”× ×—×™×•×ª ×¦×™×œ×•× ××¢×•×“×›× ×•×ª' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×”"
    unlocks:
      - upload_videos

  re_assessment_videos_ready:
    when:
      re_assessment_video_guidelines.exists: true
      uploaded_video_count: ">= 3"
    artifact: "re_assessment_videos"
    message: "×”×¡×¨×˜×•× ×™× ×œ×”×¢×¨×›×” ××—×•×“×©×ª ×”×•×¢×œ×•!"
    unlocks:
      - analyze_videos

  re_assessment_analysis_done:
    when:
      re_assessment_videos.exists: true
      videos_analyzed: true
    artifact: "re_assessment_video_analysis"
    message: "×”× ×™×ª×•×— ×”××¢×•×“×›×Ÿ ×”×•×©×œ×!"
    unlocks:
      - generate_updated_reports

  re_assessment_report_ready:
    when:
      baseline_parent_report.exists: true
      re_assessment_video_analysis.exists: true
      OR:
        re_assessment_conversation_is_rich: true
    artifact: "updated_parent_report"
    message: |
      ×”×“×•×— ×”××¢×•×“×›×Ÿ ××•×›×Ÿ! ğŸ“Š

      ×›×“××™ ×œ×”×©×•×•×ª ××ª ×”×©×™× ×•×™×™× ×××– ×”×“×•×— ×”×§×•×“× - ×–×” ××¨××” ××ª ×”×”×ª×§×“××•×ª.
    ui:
      type: "card"
      default: "×œ×—×¦×™ ×¢×œ ×”×›×¨×˜×™×¡ '×“×•×— ××¢×•×“×›×Ÿ' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×”"
    unlocks:
      - compare_progress
      - view_timeline

  re_assessment_professional_report_ready:
    when:
      updated_parent_report.exists: true
    artifact: "updated_professional_report"
    unlocks:
      - share_with_professionals

# ============================================
# PHILOSOPHY
# ============================================
philosophy: |
  Wu Wei - Effortless action through continuous flow (×¤×©×•×˜ - × ×˜×•×œ ×—×œ×§×™× ×¢×•×“×¤×™×)

  No phases. No gates. No redundancy. Just:
  1. Continuous conversation (always available)
  2. Knowledge accumulates naturally
  3. Prerequisites met â†’ Moments happen â†’ Capabilities unlock
  4. Parent can explore/ask anything anytime

  Simplification principles applied:
  - Merged artifacts + lifecycle_events + capabilities â†’ moments
  - Flattened structure (no nested objects except when/ui)
  - Removed duplicate information (descriptions, implementation docs)
  - Everything about a moment in ONE place
  - Only essential fields (when, artifact, message, ui, unlocks)

  Result: 50% less configuration, 100% of the functionality

metadata:
  version_history:
    - "1.0: Phase-based workflow (phases.yaml)"
    - "2.0: Wu Wei dependency graph (separate artifacts/events/capabilities)"
    - "3.0: Simplified Wu Wei (unified moments structure)"
  last_updated: "2025-11-11"
  breaking_changes:
    - "config['artifacts'] â†’ config['moments']"
    - "config['lifecycle_events'] â†’ config['moments']"
    - "config['capabilities'] â†’ config['always_available'] + moments[].unlocks"
    - "Moment structure flattened (when/artifact/message/ui/unlocks)"
