# Lifecycle Events - Wu Wei Configuration (×¤×©×•×˜ - × ×˜×•×œ ×—×œ×§×™× ×¢×•×“×¤×™×)
# ğŸŒŸ Wu Wei: No phases, no gates. Just prerequisites and moments.

version: "3.0"
workflow_name: "continuous_conversation_with_progressive_unlocking"

# ============================================
# ALWAYS AVAILABLE
# ============================================
# Capabilities that require no prerequisites - available from first message
always_available:
  - conversation      # Talk to Chitta anytime about anything
  - journaling        # Record observations and milestones
  - consultation      # Get answers and guidance

# ============================================
# MOMENTS
# ============================================
# Moments that unlock progressively as prerequisites are met
# Each moment can include:
#   when: Prerequisites (flat dict with AND logic, OR: {} for alternatives)
#   artifact: Artifact ID to generate (optional)
#   message: Message to send when moment happens (optional)
#   ui: UI guidance to prevent hallucinations (optional)
#     type: UI element type (card, button, modal, banner, etc.)
#     default: Guidance text for default/desktop
#     mobile: Mobile-specific guidance (only if different)
#   unlocks: List of capability IDs this moment unlocks (optional)
#
moments:
  # Welcome
  first_message:
    when:
      message_count: 1
    message: |
      ×©×œ×•×! ×× ×™ ×›××Ÿ ×›×“×™ ×œ×”×›×™×¨ ××ª {child_name} ×•×œ×¢×–×•×¨ ×œ×š ×œ×”×‘×™×Ÿ ××ª ×”×”×ª×¤×ª×—×•×ª ×©×œ×•/×”.
      ×¡×¤×¨×™ ×œ×™ - ××” ××¢× ×™×™×Ÿ ××•×ª×š? ××” ×©××— ××•×ª×š? ××” ××“××™×’?

  # Knowledge richness milestone
  knowledge_rich:
    when:
      knowledge_is_rich: true
      baseline_video_guidelines.exists: false
      user_actions.declined_video_recording: false
    message: |
      ×ª×•×“×” ×©×¡×™×¤×¨×ª ×œ×™ ×›×œ ×›×š ×”×¨×‘×” ×¢×œ {child_name}! ğŸ’™

      ×× ×™ ××¨×’×™×©×” ×©×™×© ×œ×™ ×”×‘× ×” ×˜×•×‘×” ×¢×›×©×™×•. ×× ×ª×¨×¦×™, ××•×›×œ ×œ×”×›×™×Ÿ ×œ×š ×”× ×—×™×•×ª ××•×ª×××•×ª ×œ×¦×™×œ×•× ×¡×¨×˜×•× ×™× - ×–×” ×™×¢×–×•×¨ ×œ×™ ×œ×¨××•×ª ××ª {child_name} ×‘×¤×¢×•×œ×”.

  # Baseline assessment flow
  guidelines_ready:
    when:
      knowledge_is_rich: true
    artifact: "baseline_video_guidelines"
    message: "×”×”× ×—×™×•×ª ××•×›× ×•×ª! ğŸ“¹"
    ui:
      type: "card"
      default: "×ª×¨××™ ××ª ×”×›×¨×˜×™×¡ '×”× ×—×™×•×ª ×¦×™×œ×•×' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×” - ×œ×—×¦×™ ×¢×œ×™×• ×›×“×™ ×œ×§×¨×•× ××ª ×”×”× ×—×™×•×ª ×”××œ××•×ª"
    context: |
      <system_context type="video_guidelines_process">
      You (Chitta) have just generated video filming guidelines for the parent.

      CRITICAL - How the video process works:
      1. The guidelines you created are displayed to the PARENT in a card in the UI
      2. The parent will read these guidelines, film videos of their child, and UPLOAD them through the system
      3. You CANNOT view videos directly - you are an AI assistant without video viewing capabilities
      4. When the parent uploads videos, the SYSTEM will process them and provide you with structured analysis data
      5. You will receive this analysis data as text/JSON that you CAN work with

      What you should tell the parent:
      - Acknowledge the guidelines are ready and visible in their UI
      - Encourage them to film when convenient based on the guidelines
      - Explain they will upload the videos through the upload section
      - Reassure them you'll analyze the videos once uploaded (via the system's video processing)

      What you should NEVER say:
      âŒ "I can view your videos" or "send me the videos"
      âŒ "I'll watch the videos" or "I can see the videos"
      âŒ Any claim about direct video viewing capability

      The parent interacts with you through TEXT conversation. Videos go through a separate upload flow.
      </system_context>
    unlocks:
      - upload_videos

  videos_ready:
    when:
      uploaded_video_count: ">= 3"
    artifact: "baseline_videos"
    message: |
      ××¢×•×œ×”! 3 ×”×¡×¨×˜×•× ×™× ×”×•×¢×œ×•.
      ×× ×™ ××•×›× ×” ×œ× ×ª×— ××•×ª× - ×–×” ×™×™×§×— ×›-10-15 ×“×§×•×ª. ×‘×™× ×ª×™×™×, ×ª××™×“ ××¤×©×¨ ×œ×©××•×œ ×©××œ×•×ª ××• ×œ×”×•×¡×™×£ ×œ×™×•××Ÿ. ğŸ’™
    ui:
      type: "card"
      default: "×œ×—×¦×™ ×¢×œ ×”×›×¨×˜×™×¡ '× ×™×ª×•×— ×¡×¨×˜×•× ×™×' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×” ×›×“×™ ×œ×”×ª×—×™×œ ××ª ×”× ×™×ª×•×—"
    unlocks:
      - analyze_videos

  analysis_done:
    when:
      baseline_videos.exists: true
      videos_analyzed: true
    artifact: "baseline_video_analysis"
    message: |
      ×”× ×™×ª×•×— ×”×•×©×œ×! ğŸ‰
      ××¦××ª×™ ×“×¤×•×¡×™× ××¢× ×™×™× ×™×. ×‘×•××™ × ×¡×›× ××ª ×›×œ ××” ×©×œ××“×ª×™ ×¢×œ {child_name} ×‘×“×•×— ××¡×•×“×¨.
    ui:
      type: "card"
      default: "×œ×—×¦×™ ×¢×œ ×”×›×¨×˜×™×¡ '×™×¦×™×¨×ª ×“×•×—' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×” ×›×“×™ ×œ×™×¦×•×¨ ××ª ×”×“×•×— ×”××¡×•×“×¨"
    unlocks:
      - generate_reports

  # Parent declines video recording
  video_declined:
    when:
      knowledge_is_rich: true
      user_actions.declined_video_recording: true
      baseline_parent_report.exists: false
    message: |
      ××•×‘×Ÿ ×œ×—×œ×•×˜×™×Ÿ! ğŸ’™

      ×× ×™ ×™×›×•×œ×” ×œ×”×›×™×Ÿ ×œ×š ×“×•×— ××¡×•×“×¨ ×¢×œ ×¡××š ×”×©×™×—×” ×©×œ× ×• - ×–×” ×™×›×œ×•×œ ××ª ×›×œ ××” ×©×œ××“×ª×™ ×¢×œ {child_name}.
      ×¨×•×¦×” ×©××›×™×Ÿ ××ª ×”×“×•×—?
    unlocks:
      - generate_reports

  # Report can be generated with videos OR without (conversation only)
  report_ready:
    when:
      OR:
        - baseline_video_analysis.exists: true
        - knowledge_is_rich: true
          user_actions.declined_video_recording: true
    artifact: "baseline_parent_report"
    message: |
      ×”×“×•×— ××•×›×Ÿ! ğŸ“„

      ×–×” ×”×™×” ×ª×”×œ×™×š ×¢×©×™×¨ - ×ª×•×“×” ×©×”×©×§×¢×ª ××ª ×”×–××Ÿ ×œ×©×ª×£.
      ××¢×›×©×™×• ×× ×™ ×›××Ÿ ×‘×©×‘×™×œ×š ×œ×›×œ ×©××œ×”, ×›×œ ×ª×¦×¤×™×ª, ×›×œ ×“×‘×¨ ×©××ª×¢×•×¨×¨ ×‘×“×¨×š. ğŸ’™
    ui:
      type: "card"
      default: "×œ×—×¦×™ ×¢×œ ×”×›×¨×˜×™×¡ '××“×¨×™×š ×œ×”×•×¨×™×' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×” ×›×“×™ ×œ×§×¨×•× ××ª ×”×“×•×— ×”××œ×"
    unlocks:
      - view_reports
      - find_experts
      - start_re_assessment

  professional_report_ready:
    when:
      baseline_parent_report.exists: true
    artifact: "baseline_professional_report"
    unlocks:
      - expert_matching

  # Ongoing support
  journal_entries:
    artifact: "journal_entries"
    # No prerequisites - always available via always_available list

  # Re-assessment flow
  re_assessment_guidelines_ready:
    when:
      baseline_parent_report.exists: true
      re_assessment.active: true
      knowledge_is_rich: true
    artifact: "re_assessment_video_guidelines"
    message: "×”× ×—×™×•×ª ××¢×•×“×›× ×•×ª ××•×›× ×•×ª! ğŸ“¹"
    ui:
      type: "card"
      default: "×ª×¨××™ ××ª ×”×›×¨×˜×™×¡ '×”× ×—×™×•×ª ×¦×™×œ×•× ××¢×•×“×›× ×•×ª' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×”"
    context: |
      <system_context type="video_guidelines_process">
      You (Chitta) have just generated updated video filming guidelines for re-assessment.

      CRITICAL - How the video process works:
      1. The guidelines you created are displayed to the PARENT in a card in the UI
      2. The parent will read these guidelines, film videos of their child, and UPLOAD them through the system
      3. You CANNOT view videos directly - you are an AI assistant without video viewing capabilities
      4. When the parent uploads videos, the SYSTEM will process them and provide you with structured analysis data
      5. You will receive this analysis data as text/JSON that you CAN work with

      What you should tell the parent:
      - Acknowledge the updated guidelines are ready and visible in their UI
      - Encourage them to film when convenient based on the new guidelines
      - Explain they will upload the videos through the upload section
      - Reassure them you'll analyze the videos once uploaded (via the system's video processing)

      What you should NEVER say:
      âŒ "I can view your videos" or "send me the videos"
      âŒ "I'll watch the videos" or "I can see the videos"
      âŒ Any claim about direct video viewing capability

      The parent interacts with you through TEXT conversation. Videos go through a separate upload flow.
      </system_context>
    unlocks:
      - upload_videos

  re_assessment_videos_ready:
    when:
      re_assessment_video_guidelines.exists: true
      uploaded_video_count: ">= 3"
    artifact: "re_assessment_videos"
    message: "×”×¡×¨×˜×•× ×™× ×œ×”×¢×¨×›×” ××—×•×“×©×ª ×”×•×¢×œ×•!"
    unlocks:
      - analyze_videos

  re_assessment_analysis_done:
    when:
      re_assessment_videos.exists: true
      videos_analyzed: true
    artifact: "re_assessment_video_analysis"
    message: "×”× ×™×ª×•×— ×”××¢×•×“×›×Ÿ ×”×•×©×œ×!"
    unlocks:
      - generate_updated_reports

  re_assessment_report_ready:
    when:
      baseline_parent_report.exists: true
      re_assessment_video_analysis.exists: true
      OR:
        re_assessment_conversation_is_rich: true
    artifact: "updated_parent_report"
    message: |
      ×”×“×•×— ×”××¢×•×“×›×Ÿ ××•×›×Ÿ! ğŸ“Š

      ×›×“××™ ×œ×”×©×•×•×ª ××ª ×”×©×™× ×•×™×™× ×××– ×”×“×•×— ×”×§×•×“× - ×–×” ××¨××” ××ª ×”×”×ª×§×“××•×ª.
    ui:
      type: "card"
      default: "×œ×—×¦×™ ×¢×œ ×”×›×¨×˜×™×¡ '×“×•×— ××¢×•×“×›×Ÿ' ×‘'×¤×¢×™×œ ×¢×›×©×™×•' ×œ××˜×”"
    unlocks:
      - compare_progress
      - view_timeline

  re_assessment_professional_report_ready:
    when:
      updated_parent_report.exists: true
    artifact: "updated_professional_report"
    unlocks:
      - share_with_professionals

# ============================================
# PHILOSOPHY
# ============================================
philosophy: |
  Wu Wei - Effortless action through continuous flow (×¤×©×•×˜ - × ×˜×•×œ ×—×œ×§×™× ×¢×•×“×¤×™×)

  No phases. No gates. No redundancy. Just:
  1. Continuous conversation (always available)
  2. Knowledge accumulates naturally
  3. Prerequisites met â†’ Moments happen â†’ Capabilities unlock
  4. Parent can explore/ask anything anytime

  Simplification principles applied:
  - Merged artifacts + lifecycle_events + capabilities â†’ moments
  - Flattened structure (no nested objects except when/ui)
  - Removed duplicate information (descriptions, implementation docs)
  - Everything about a moment in ONE place
  - Only essential fields (when, artifact, message, ui, unlocks)

  Result: 50% less configuration, 100% of the functionality

metadata:
  version_history:
    - "1.0: Phase-based workflow (phases.yaml)"
    - "2.0: Wu Wei dependency graph (separate artifacts/events/capabilities)"
    - "3.0: Simplified Wu Wei (unified moments structure)"
  last_updated: "2025-11-11"
  breaking_changes:
    - "config['artifacts'] â†’ config['moments']"
    - "config['lifecycle_events'] â†’ config['moments']"
    - "config['capabilities'] â†’ config['always_available'] + moments[].unlocks"
    - "Moment structure flattened (when/artifact/message/ui/unlocks)"
