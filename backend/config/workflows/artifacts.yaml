# Artifacts - Documents and data that emerge throughout the workflow
#  Wu Wei v2.1: Added slot configuration for Daniel's Space (Living Dashboard Phase 2)
# Defines artifact metadata, storage, generation configuration, and UI slots
#
# Note: artifact_generators.yaml has been merged into this file

version: "2.1"
artifact_catalog_name: "child_development_artifacts"
description: "All artifacts produced during the child development journey"

# ============================================
# ARTIFACT TYPES
# ============================================
artifact_types:
  report:
    description: "Assessment documents"
    format: "markdown/pdf"
    can_download: true
    can_share: true

  analysis:
    description: "Structured analysis results"
    format: "json"
    can_download: false
    can_share: false

  guidelines:
    description: "Personalized instructions"
    format: "json/markdown"
    can_download: true
    can_share: false

  video:
    description: "Video recordings"
    format: "mp4/mov"
    can_download: true
    can_share: false

  journal:
    description: "Timestamped observations"
    format: "json"
    can_download: true
    can_share: false

# ============================================
# SLOTS (Daniel's Space - Living Dashboard Phase 2)
# ============================================
# Slots define how artifacts appear in Daniel's Space header
# Each slot shows the "current" version of an artifact type
# Multiple artifacts can map to the same slot (newer replaces older)

slots:
  current_report:
    slot_name: " "
    slot_name_en: "Current Report"
    icon: ""
    description: "The latest development report"
    primary_action: "view_report"
    secondary_action: "download_report"

  filming_guidelines:
    slot_name: "转 爪"
    slot_name_en: "Filming Guidelines"
    icon: ""
    description: "Personalized video filming instructions"
    primary_action: "view_guidelines"

  videos:
    slot_name: "住专"
    slot_name_en: "Videos"
    icon: ""
    description: "Uploaded behavioral videos"
    is_collection: true
    primary_action: "view_videos"
    secondary_action: "upload_video"

  journal:
    slot_name: ""
    slot_name_en: "Journal"
    icon: ""
    description: "Parent observations and notes"
    is_collection: true
    primary_action: "view_journal"
    secondary_action: "add_journal_entry"

# Slot display order in Daniel's Space
slot_order:
  - current_report
  - filming_guidelines
  - videos
  - journal

# ============================================
# ARTIFACTS
# ============================================
# Each artifact defines:
# - name/type: Display info
# - states: Lifecycle states
# - storage: Storage location pattern
# - generator: Generation configuration (method, requires, params)
artifacts:
  # ========================================
  # BASELINE ARTIFACTS (Initial Assessment)
  # ========================================

  baseline_interview_summary:
    name: "住 专"
    name_en: "Interview Summary"
    type: analysis
    description: "Holistic interview summary with clinical data and parent persona"
    states: [pending, generating, ready, error]
    storage: "sessions/{session_id}/artifacts/interview_summary.json"
    #  Wu Wei: Generator config inline
    generator:
      method: "generate_interview_summary"
      requires_artifacts: []  # Uses session data
      description: "Synthesizes conversation + extracted_data"

  baseline_video_guidelines:
    name: "转 爪"
    name_en: "Video Guidelines"
    type: guidelines
    description: "Personalized video filming instructions with analyst context"
    states: [pending, generating, ready, error]
    storage: "sessions/{session_id}/artifacts/video_guidelines.json"
    generator:
      method: "generate_video_guidelines"
      requires_artifacts: [baseline_interview_summary]
      validation:
        type: "json_structure"
        checks:
          - path: "scenarios"
            type: "array"
            min_length: 1
    #  Phase 2: Slot configuration for Daniel's Space
    slot:
      slot_id: "filming_guidelines"
      replaces_previous: true
      preview_field: "focus_areas"

  baseline_video_analysis:
    name: "转 "
    name_en: "Video Analysis"
    type: analysis
    description: "Clinical video analysis using interview context"
    states: [pending, analyzing, ready, error]
    storage: "sessions/{session_id}/artifacts/video_analysis.json"
    generator:
      method: "analyze_videos"
      requires_artifacts: [baseline_interview_summary, baseline_video_guidelines]
      requires_data: [uploaded_videos]

  baseline_professional_report:
    name: " 拽爪注"
    name_en: "Professional Report"
    type: report
    description: "Clinical assessment report"
    states: [pending, generating, ready, error]
    storage: "sessions/{session_id}/artifacts/professional_report.md"
    generator:
      method: "generate_professional_report"
      requires_artifacts: [baseline_interview_summary]
      optional_artifacts: [baseline_video_analysis]

  baseline_parent_report:
    name: " 专"
    name_en: "Parent Report"
    type: report
    description: "Parent-friendly report derived from professional report"
    states: [pending, generating, ready, error]
    storage: "sessions/{session_id}/artifacts/parent_report.md"
    generator:
      method: "generate_parent_report"
      requires_artifacts: [baseline_professional_report]
    #  Phase 2: Slot configuration for Daniel's Space
    slot:
      slot_id: "current_report"
      replaces_previous: true
      keep_history: true
      preview_field: "summary"

  # ========================================
  # USER-CREATED ARTIFACTS
  # ========================================

  behavioral_videos:
    name: "住专 转转"
    name_en: "Behavioral Videos"
    type: video
    description: "Parent-uploaded videos"
    states: [pending_upload, uploading, ready, error]
    storage: "sessions/{session_id}/videos/{video_id}.{ext}"
    created_by: user
    validation:
      max_size_mb: 500
      max_duration_minutes: 10
      allowed_formats: ["mp4", "mov", "avi"]
    #  Phase 2: Slot configuration for Daniel's Space
    slot:
      slot_id: "videos"
      is_collection: true

  journal_entries:
    name: "专砖转 "
    name_en: "Journal Entries"
    type: journal
    description: "Parent observations over time"
    states: [draft, saved]
    storage: "sessions/{session_id}/journal/{entry_id}.json"
    created_by: user
    is_collection: true
    #  Phase 2: Slot configuration for Daniel's Space
    slot:
      slot_id: "journal"
      is_collection: true

  # ========================================
  # RE-ASSESSMENT ARTIFACTS
  # ========================================

  re_assessment_video_guidelines:
    name: "转 爪 注转"
    name_en: "Updated Video Guidelines"
    type: guidelines
    description: "Targeted guidelines for re-assessment"
    states: [pending, generating, ready, error]
    storage: "sessions/{session_id}/artifacts/re_assessment_video_guidelines.json"
    generator:
      method: "generate_video_guidelines"
      requires_artifacts: [baseline_interview_summary]

  re_assessment_video_analysis:
    name: "转  注"
    name_en: "Updated Video Analysis"
    type: analysis
    description: "Re-assessment video analysis"
    states: [pending, analyzing, ready, error]
    storage: "sessions/{session_id}/artifacts/re_assessment_video_analysis.json"
    generator:
      method: "analyze_videos"
      requires_artifacts: [baseline_interview_summary, re_assessment_video_guidelines]

  updated_professional_report:
    name: " 拽爪注 注"
    name_en: "Updated Professional Report"
    type: report
    description: "Clinical re-assessment with comparison to baseline"
    states: [pending, generating, ready, error]
    storage: "sessions/{session_id}/artifacts/professional_report_v{version}.md"
    generator:
      method: "generate_professional_report"
      requires_artifacts: [baseline_interview_summary, baseline_professional_report]
      optional_artifacts: [re_assessment_video_analysis]

  updated_parent_report:
    name: " 专 注"
    name_en: "Updated Parent Report"
    type: report
    description: "Re-assessment report with progress comparison"
    states: [pending, generating, ready, error]
    storage: "sessions/{session_id}/artifacts/parent_report_v{version}.md"
    generator:
      method: "generate_parent_report"
      requires_artifacts: [updated_professional_report]
    #  Phase 2: Slot configuration - replaces baseline in same slot
    slot:
      slot_id: "current_report"
      replaces_previous: true
      keep_history: true
      preview_field: "summary"

# ============================================
# METADATA
# ============================================
metadata:
  last_updated: "2025-11-25"
  version_history:
    - "1.0: Verbose artifact definitions with phase-based logic"
    - "2.0: Simplified with inline generator config (Wu Wei)"
    - "2.1: Added slot configuration for Daniel's Space (Living Dashboard Phase 2)"
  notes: |
     Wu Wei v2.1: Added Daniel's Space slot configuration

    Key changes in v2.1:
    - Added 'slots' section defining UI slots for Daniel's Space
    - Added 'slot_order' for display ordering
    - Each artifact can have a 'slot' field mapping it to a UI slot
    - Slots support: replaces_previous, keep_history, is_collection, preview_field
    - Multiple artifacts can map to the same slot (e.g., baseline + updated reports)

    Previous changes (v2.0):
    - Merged artifact_generators.yaml into this file
    - Removed phase-based logic (available_in_phases)
    - Simplified each artifact to: name, type, states, storage, generator
